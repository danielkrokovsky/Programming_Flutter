<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Programming Flutter</title>
  <link href="css/bookshelf.css" rel="stylesheet" type="text/css"/>
  <link href="css/book_local.css" rel="stylesheet" type="text/css"/>
  <meta content="urn:uuid:08781442-9212-4868-bf02-b4ef0fd56427" name="Adept.expected.resource"/>
</head>

<body>

  <h2 id="sec.calculator.expanded">Make the App Look and Work Right with Expanded</h2>

  <p id="d24e12088">

Currently, the app wouldn’t look right if you ran it on a device.</p>

  <p id="d24e12099">To make the buttons of the right shape and size, we need to wrap <span class="cf class">Row</span>s, <span class="cf class">Column</span>s, and the buttons themselves in <span class="cf class">Expanded</span>.</p>

  <h3>Expand Elements to Divide the Space Inside the Main Column</h3>

  <p id="d24e12113">We’ll expand some elements to make them exactly as big as we want them to be.</p>

  <p id="d24e12116">In this case, the main <span class="cf class">Column</span> will be divided in the following way:</p>

  <ul>

    <li>2/7 of the space will be taken up by the calculator screen.</li>

    <li>1/7 of the space will be taken up by the deletion row.</li>

    <li>The remaining 4/7 of the space (four times as much as the deletion row) will be taken up by the numbers and operators, so that every button (including the delete buttons) is of the same height.</li>

  </ul>

  <p id="d24e12131">
As was explained in <a href="Capítulo-027.html#sec.layout.expanded">​<em>Fill the Space Available in the View Using Expanded</em>​</a>, the <span class="cf class">Expanded</span> widget makes this really simple, requiring you to replace the calculator screen shown in the <a href="Capítulo-037.html#code.layout.calculator.screen">​code​</a><a href="Capítulo-037.html#code.layout.calculator.screen">​​</a> with this:</p>

  <div class="livecodelozenge"><a href="http://media.pragprog.com/titles/czflutr/code/layout/calculator_part2/lib/main.dart">layout/calculator_part2/lib/main.dart</a></div>

  <table class="processedcode">

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  flex: 2,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  child: Card(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    color: Colors.lightGreen[50],</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    child: Padding(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      padding: EdgeInsets.all(15.0),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      child: Text(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        _str,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        textScaleFactor: 2.0,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">),</td>
    </tr>

  </table>

  <p id="d24e12183">
Similarly, the first <span class="cf class">Row</span> widget (the one containing the delete buttons, shown in the <a href="Capítulo-038.html#code.layout.calculator.delete">​code​</a><a href="Capítulo-038.html#code.layout.calculator.delete">​​</a>) will have to be replaced with:</p>

  <table class="processedcode">

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  flex: 1,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  child: Row(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    ...</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  )</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">)</td>
    </tr>

  </table>

  <p id="d24e12212">and the one containing the number buttons (shown in the <a href="Capítulo-039.html#code.layout.calculator.numbers">​code​</a><a href="Capítulo-039.html#code.layout.calculator.numbers">​​</a>) will similarly have to be replaced with:</p>

  <table class="processedcode">

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  flex: 4,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  child: Row(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    ...</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  )</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">)</td>
    </tr>

  </table>

  <h3>Expand Elements to Divide the Space Inside the Deletion Row</h3>

  <p id="d24e12234">
Three quarters of the space will be taken up by the <span class="emph">delete all</span> button and one quarter by the <span class="emph">delete one</span> button.</p>

  <p id="d24e12250">This means that those two <span class="cf class">FlatButton</span>s will have to be expanded by replacing them with <span class="cf class">FlatButton</span>s wrapped in two <span class="cf class">Expanded</span> widgets with <span class="cf ic">flex</span> values of, respectively, 3 and 1:</p>

  <div class="livecodelozenge"><a href="http://media.pragprog.com/titles/czflutr/code/layout/calculator_part2/lib/main.dart">layout/calculator_part2/lib/main.dart</a></div>

  <table class="processedcode">

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  flex: 3,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  child: FlatButton(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    child: Text(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      ​<em class="string">'C'</em>​,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      style: TextStyle(color: Colors.white),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    onPressed: (){deleteAll();},</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    color: Colors.black54,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  flex: 1,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  child: FlatButton(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    child: Text(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      ​<em class="string">'&lt;-'</em>​,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      style: TextStyle(color: Colors.white)</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    onPressed: (){deleteOne();},</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    color: Colors.black87,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">),</td>
    </tr>

  </table>

  <h3>Expand Elements to Divide the Space Inside the Number and Operator Grid</h3>

  <p id="d24e12335">
Similarly, you will need to expand the numbers’ <span class="cf class">Column</span> with a <span class="cf ic">flex</span> of 3 and the operators’ <span class="cf class">Column</span> with a <span class="cf ic">flex</span> of 1 to make the buttons all of the same size.</p>

  <h3>Create ExpandedRow and ExpandedButton for the Rest of the Buttons</h3>

  <p id="d24e12360">
The number and operator buttons should all be of the same size, so they should all be wrapped in <span class="cf class">Expanded</span> widgets with the same <span class="cf ic">flex</span> which, for simplicity, we’ll set to the value 1.</p>

  <p id="d24e12374">The same is true for the <span class="cf class">Row</span>s of number buttons: they all need to be expanded with the same <span class="cf ic">flex</span>.</p>

  <p id="d24e12382">To avoid repetition and to speed up replacement of many widgets, we’ll build expanded <span class="cf class">FlatButton</span> and <span class="cf class">Row</span> classes, which will be called <span class="cf class">ExpandedButton</span> and <span class="cf class">ExpandedRow</span>.</p>

  <p id="d24e12396">They need to take all of the arguments and options we currently use, and build the corresponding widgets wrapped in <span class="cf class">Expanded</span>.</p>

  <p id="d24e12401">They are defined, very simply, above <span class="cf methodname">main</span>, in the following way:</p>

  <div class="livecodelozenge"><a href="http://media.pragprog.com/titles/czflutr/code/layout/calculator_part2/lib/main.dart">layout/calculator_part2/lib/main.dart</a></div>

  <table class="processedcode">

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">​<strong class="kw">class</strong>​ ExpandedButton ​<strong class="kw">extends</strong>​ StatelessWidget {</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ExpandedButton({​<strong class="kw">this</strong>​.onPressed, ​<strong class="kw">this</strong>​.child, ​<strong class="kw">this</strong>​.color});</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ​<strong class="kw">final</strong>​ Widget child;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ​<strong class="kw">final</strong>​ VoidCallback onPressed;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ​<strong class="kw">final</strong>​ Color color;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  @override</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  Widget build(BuildContext context) =&gt;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      flex:1,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      child: FlatButton(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        onPressed: onPressed,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        child: child,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        color: color,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    );</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">}</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">​<strong class="kw">class</strong>​ ExpandedRow ​<strong class="kw">extends</strong>​ StatelessWidget {</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ExpandedRow({​<strong class="kw">this</strong>​.children, ​<strong class="kw">this</strong>​.crossAxisAlignment});</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ​<strong class="kw">final</strong>​ List&lt;Widget&gt; children;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  ​<strong class="kw">final</strong>​ CrossAxisAlignment crossAxisAlignment;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline"/>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  @override</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">  Widget build(BuildContext context) =&gt;</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    Expanded(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      flex:1,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      child: Row(</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        children: children,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">        crossAxisAlignment: crossAxisAlignment,</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">      ),</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">    );</td>
    </tr>

    <tr>
      <td class="codeinfo">​<span class="codeprefix"> </span></td>
      <td class="codeline">}</td>
    </tr>

  </table>

  <p id="d24e12534">After defining them, simply replace all of the operator button’s <span class="cf class">Row</span> widgets with <span class="cf class">ExpandedRow</span> widgets and all of the operator and number <span class="cf class">FlatButton</span>s and the calculator’s layout should be complete.
</p>

</body>

</html>